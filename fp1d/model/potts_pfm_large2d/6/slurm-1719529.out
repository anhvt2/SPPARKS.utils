SPK INPUT SCRIPT:
# SPPARKS Potts tests on generic lattice
# a simple two-component, two- phase system.
# Parameters as in Homer, Tikare, Holm, Comp.Mat.Sci (2013)
# 2D lattice, similar to section 3.3.2

# seed 		56789
include in.seed.spk

# lambda sometimes called gamma
# a1 = a2 = a
# Nspins PFsteps lambda M_C KappaC a c1 c2 c3 c4
# set Nspins as a variable

# parameters settings (edit by AT)
variable	Nspins equal 200 # previously: 200
variable	boxSize equal 1000
variable 	PFsteps equal 10
variable	runTime equal 20000


# simulation
app_style	potts/pfm ${Nspins} ${PFsteps} 0.3 1 1 0.5 0.25 0.75 0.05 0.95 &
			reset_phasefield no &
			print_connectivity yes &
			initialize_values yes &
			enforce_concentration_limits no

dimension 	2
lattice 	sq/8n 1.0
region 		box block 0 ${boxSize} 0 ${boxSize} -0.5 0.5

create_box 	box
create_sites 	box

# assign random spins to sites
set 		site range 1 ${Nspins} #  edit by AT

# assign phase 0 or 1 to i2, based on spin

# set variable (edit by AT)
variable	thres1 equal "v_Nspins/2 + 1"
print		"Set variables successful! "

set 		i2 value 1
set 		i2 value 0 if i1 < ${thres1}  # 101 -> 1001

# assign initial concentration to d1, based on phase

set 		d1 value 1.0
set 		d1 value 0 if i2 = 0

sweep 		random
sector 		yes

# if yes, skip Monte Carlo solve or sweep
#app_update_only 	yes #no

# enforces concentration boundary conditions: C(xlo) = 0, C(xhi) = 1.0
#pottspfm_reset_phasefield yes #no

# show the neighborlist indices used for finite difference stencil
#pottspfm_print_connectivity yes #no

# initializes at equilibrium concentrations of phases dE/dC = 0
#pottspfm_initialize_values yes #no 

# constrain site concentrations to the physical range 
# if C(x) < 0.0, C(x) = 0.0
# if C(x) > 1.0, C(x) = 1.0
#pottspfm_enforce_concentration_limits yes #no

diag_style 	energy
diag_style 	array i2 mean d1 sum d1 min d1 max
temperature 	0.3

# all output generated at uniform intervals of log(t)

stats 		1.0 logfreq 9 10.0
dump 			1 text 1.0 dump.*.out id site i2 d1 energy
dump_modify 	1 logfreq 9 10.0

# graphics output
# if no JPEG support, remove these commands

dump			2 image 1.0 grain.*.jpg i1 site shape cube sdiam 1.0 crange 0 201 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	2 logfreq 9 10.0

dump			3 image 1.0 phase.*.jpg i2 site shape cube sdiam 1.0 crange -1 2 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	3 logfreq 9 10.0

dump			4 image 1.0 conc.*.jpg d1 site shape cube sdiam 1.0 crange 0.0 1.0 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	4 logfreq 9 10.0

# cluster analysis based on spins

diag_style 		cluster delt 1.0 stats no logfreq 9 10.0 filename cluster.dat


# short run
run 			${runTime}



SPPARKS (24 June 2021)
Created box = (0 0 -0.5) to (1000 1000 0.5)
  1 by 1 by 1 processor grid
Creating sites ...
  1000000 sites
  1000000 sites have 8 neighbors
Setting site values ...
  1000000 settings made for site
Set variables successful! 
Setting site values ...
  1000000 settings made for i2
Setting site values ...
  499701 settings made for i2
Setting site values ...
  1000000 settings made for d1
Setting site values ...
  499701 settings made for d1
Connectivity map for app_style: potts/pfm
  +/-     x     y
    -     1     3
    +     6     4

Setting up run ...
Running with 32-bit site IDs
Memory usage per processor = 77.5 Mbytes
      Time    Naccept    Nreject    Nsweeps        CPU     Energy   mean(i2)    sum(d1)    min(d1)    max(d1)
         0          0          0          0          0 8.13611e+06   0.499701     499878   0.295455   0.704545
         1    2825360    5174640          8       7.21 3.3864e+06   0.496843     499878   0.163087   0.815073
     1.375    3226684    7773316         11       10.8 2.96262e+06   0.497228     499878    0.16676   0.831734
      1.75    3562731   10437269         14       14.3 2.7009e+06   0.497054     499878   0.157951   0.830796
      2.25    3952107   14047893         18       18.3 2.46115e+06   0.496535     499878   0.159857   0.845829
     2.875    4380571   18619429         23       22.8 2.25157e+06   0.496386     499878   0.147981   0.867736
     3.625    4841243   24158757         29       27.9 2.06731e+06   0.495856     499878   0.123558   0.900408
      4.75    5462134   32537866         38       34.5 1.86736e+06   0.495471     499878   0.118241   0.897307
         6    6077003   41922997         48       41.5 1.70788e+06   0.495945     499878   0.105866   0.899402
      7.75    6856315   55143685         62       50.6 1.54905e+06   0.496172     499878   0.111221   0.903702
        10    7748340   72251660         80       61.7 1.40365e+06   0.495806     499878   0.076997   0.934988
        13    8812698   95187302        104       75.7 1.26954e+06   0.495997     499878  0.0773486   0.921791
     16.75   10006196  123993804        134       92.7 1.15225e+06   0.495788     499878  0.0772933   0.945184
Warning: Concentration has deviated outside [0,1] range
    21.625   11392440  161607560        173        114 1.04566e+06   0.495239     499878  0.0399716    0.97806
    27.875   12993242  210006758        223        140     951622   0.495125     499878  0.0708142   0.945231
        36   14855081  273144919        288        173     868105   0.493482     499878  0.0750007   0.919199
      46.5   17022684  354977316        372        216     791876   0.492275     499878  0.0319357   0.914863
        60   19524019  460475981        480        269     727737   0.492118     499878  0.0875152   0.956715
      77.5   22471781  597528219        620        337     667230   0.491197     499878   0.113095   0.927846
       100   25904230  774095770        800        424     614984   0.491046     499878  0.0825178   0.915152
    129.25   29942517 1004057483       1034        536     568576    0.49259     499878  0.0850286   0.890265
   166.875   34689702 1300310298       1335        679     526025   0.496331     499878  0.0565535    0.92422
     215.5   40296889 1683703111       1724        862     487575   0.498524     499878    0.06293   0.867276
   278.375   46934291 2180065709       2227    1.1e+03     454985   0.497216     499878   0.145027   0.883674
     359.5   54761700 2821238300       2876    1.4e+03     426211   0.500768     499878   0.118878    0.88718
    464.25   64081425 3649918575       3714   1.79e+03     398461   0.501033     499878  0.0730997   0.841319
     599.5   75205730 4720794270       4796   2.29e+03     374288   0.499303     499878   0.155726   0.828375
   774.375   88308132 6106691868       6195   2.93e+03     350829   0.499621     499878   0.187399    0.82854
      1000  103780833 7896219167       8000   3.76e+03     330763   0.499217     499878    0.16938   0.823139
   1291.62  122178011 10210821989      10333   4.82e+03     311095   0.500427     499878   0.200787   0.826472
   1668.12  143833736 13201166264      13345    6.2e+03     295590   0.497283     499878   0.210166   0.808086
    2154.5  169781804 17066218196      17236   7.97e+03     280421   0.496189     499878   0.207425   0.821316
   2782.62  200671791 22060328209      22261   1.03e+04     264699   0.497837     499878   0.206643   0.798025
   3593.88  237501907 28513498093      28751   1.32e+04     249739   0.501009     499878   0.177821   0.800043
   4641.62  280671146 36852328854      37133    1.7e+04     238567   0.501085     499878   0.130459    0.79063
   5994.88  331889238 47627110762      47959   2.19e+04     227928   0.502962     499878   0.224555    0.77945
   7742.75  394033640 61547966360      61942   2.82e+04     220185    0.50268     499878   0.214696   0.769569
     10000  471128777 79528871223      80000   3.64e+04     211048   0.499144     499878   0.230624   0.781364
   12915.5  562839667 102761160333     103324   4.69e+04     200405   0.497235     499878   0.206055   0.836757
   16681.1  672551095 132776448905     133449   6.05e+04     191397   0.498395     499878   0.226871   0.765928
     20000  764297904 159235702096     160000   7.24e+04     184988   0.496519     499878   0.227705   0.774706
Loop time of 72408.6 on 1 procs

Solve time (%) = 72343.2 (99.9096)
Update time (%) = 0 (0)
Comm  time (%) = 0.707266 (0.00097677)
Outpt time (%) = 64.6213 (0.0892453)
App   time (%) = 0 (0)
Other time (%) = 0.10974 (0.000151556)
