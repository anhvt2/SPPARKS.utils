SPK INPUT SCRIPT:
# SPPARKS Potts tests on generic lattice
# a simple two-component, two- phase system.
# Parameters as in Homer, Tikare, Holm, Comp.Mat.Sci (2013)
# 2D lattice, similar to section 3.3.2

# seed 		56789
include in.seed.spk

# lambda sometimes called gamma
# a1 = a2 = a
# Nspins PFsteps lambda M_C KappaC a c1 c2 c3 c4
# set Nspins as a variable

# parameters settings (edit by AT)
variable	Nspins equal 200 # previously: 200
variable	boxSize equal 1000
variable 	PFsteps equal 10
variable	runTime equal 20000


# simulation
app_style	potts/pfm ${Nspins} ${PFsteps} 0.3 1 1 0.5 0.25 0.75 0.05 0.95 &
			reset_phasefield no &
			print_connectivity yes &
			initialize_values yes &
			enforce_concentration_limits no

dimension 	2
lattice 	sq/8n 1.0
region 		box block 0 ${boxSize} 0 ${boxSize} -0.5 0.5

create_box 	box
create_sites 	box

# assign random spins to sites
set 		site range 1 ${Nspins} #  edit by AT

# assign phase 0 or 1 to i2, based on spin

# set variable (edit by AT)
variable	thres1 equal "v_Nspins/2 + 1"
print		"Set variables successful! "

set 		i2 value 1
set 		i2 value 0 if i1 < ${thres1}  # 101 -> 1001

# assign initial concentration to d1, based on phase

set 		d1 value 1.0
set 		d1 value 0 if i2 = 0

sweep 		random
sector 		yes

# if yes, skip Monte Carlo solve or sweep
#app_update_only 	yes #no

# enforces concentration boundary conditions: C(xlo) = 0, C(xhi) = 1.0
#pottspfm_reset_phasefield yes #no

# show the neighborlist indices used for finite difference stencil
#pottspfm_print_connectivity yes #no

# initializes at equilibrium concentrations of phases dE/dC = 0
#pottspfm_initialize_values yes #no 

# constrain site concentrations to the physical range 
# if C(x) < 0.0, C(x) = 0.0
# if C(x) > 1.0, C(x) = 1.0
#pottspfm_enforce_concentration_limits yes #no

diag_style 	energy
diag_style 	array i2 mean d1 sum d1 min d1 max
temperature 	0.3

# all output generated at uniform intervals of log(t)

stats 		1.0 logfreq 9 10.0
dump 			1 text 1.0 dump.*.out id site i2 d1 energy
dump_modify 	1 logfreq 9 10.0

# graphics output
# if no JPEG support, remove these commands

dump			2 image 1.0 grain.*.jpg i1 site shape cube sdiam 1.0 crange 0 201 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	2 logfreq 9 10.0

dump			3 image 1.0 phase.*.jpg i2 site shape cube sdiam 1.0 crange -1 2 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	3 logfreq 9 10.0

dump			4 image 1.0 conc.*.jpg d1 site shape cube sdiam 1.0 crange 0.0 1.0 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	4 logfreq 9 10.0

# cluster analysis based on spins

diag_style 		cluster delt 1.0 stats no logfreq 9 10.0 filename cluster.dat


# short run
run 			${runTime}



SPPARKS (24 June 2021)
Created box = (0 0 -0.5) to (1000 1000 0.5)
  1 by 1 by 1 processor grid
Creating sites ...
  1000000 sites
  1000000 sites have 8 neighbors
Setting site values ...
  1000000 settings made for site
Set variables successful! 
Setting site values ...
  1000000 settings made for i2
Setting site values ...
  500489 settings made for i2
Setting site values ...
  1000000 settings made for d1
Setting site values ...
  500489 settings made for d1
Connectivity map for app_style: potts/pfm
  +/-     x     y
    -     1     3
    +     6     4

Setting up run ...
Running with 32-bit site IDs
Memory usage per processor = 77.5 Mbytes
      Time    Naccept    Nreject    Nsweeps        CPU     Energy   mean(i2)    sum(d1)    min(d1)    max(d1)
         0          0          0          0          0 8.13644e+06   0.500489     500200   0.295455   0.704545
         1    2827519    5172481          8        7.2 3.3844e+06   0.503853     500200   0.174065   0.817144
     1.375    3228228    7771772         11       10.8 2.96309e+06   0.503474     500200   0.169464   0.824211
      1.75    3563460   10436540         14       14.3 2.70058e+06   0.503176     500200   0.174776   0.851286
      2.25    3953298   14046702         18       18.2 2.46093e+06   0.502526     500200   0.104998   0.847611
     2.875    4383914   18616086         23       22.8 2.24859e+06   0.502753     500200   0.160335   0.870558
     3.625    4847168   24152832         29       27.8 2.06574e+06   0.503207     500200   0.109702   0.885146
      4.75    5468125   32531875         38       34.4 1.86788e+06   0.503621     500200   0.143025   0.891826
         6    6088217   41911783         48       41.4 1.70899e+06   0.503606     500200  0.0886518   0.906827
      7.75    6863936   55136064         62       50.5 1.54958e+06   0.502462     500200  0.0958572   0.912839
        10    7758597   72241403         80       61.5 1.40385e+06   0.501483     500200  0.0808462   0.910822
        13    8825031   95174969        104       75.4 1.26772e+06   0.501078     500200  0.0505959   0.924658
Warning: Concentration has deviated outside [0,1] range
     16.75   10013052  123986948        134       92.1 1.1536e+06   0.500489     500200  0.0651056   0.928547
    21.625   11401641  161598359        173        113 1.04872e+06   0.500289     500200   0.063608   0.909128
    27.875   12994274  210005726        223        139     953644   0.500171     500200  0.0992804   0.954915
        36   14854062  273145938        288        172     868995   0.500877     500200  0.0768172   0.932633
      46.5   17029368  354970632        372        214     796820   0.500811     500200  0.0984386   0.960951
        60   19566319  460433681        480        267     731203   0.499115     500200  0.0670924   0.949319
      77.5   22535593  597464407        620        335     671162   0.497512     500200  0.0286742   0.936197
       100   26007960  773992040        800        421     619565   0.497306     500200   0.107482   0.929475
    129.25   30103067 1003896933       1034        533     572760   0.495797     500200   0.114844   0.901452
   166.875   34908393 1300091607       1335        674     530776    0.49528     500200   0.108033   0.914464
     215.5   40611608 1683388392       1724        856     494183   0.496068     500200   0.115976   0.849507
   278.375   47355264 2179644736       2227   1.09e+03     456055    0.49774     500200   0.119735    0.95243
     359.5   55171974 2820828026       2876   1.39e+03     425716   0.497144     500200   0.124904   0.949523
    464.25   64378906 3649621094       3714   1.78e+03     399677   0.496495     500200  0.0998298   0.886692
     599.5   75389721 4720610279       4796   2.27e+03     373977    0.49674     500200   0.166499   0.838853
   774.375   88461973 6106538027       6195   2.91e+03     352548   0.497138     500200   0.174935   0.880187
      1000  103961983 7896038017       8000   3.74e+03     334225   0.499576     500200   0.116945   0.830096
   1291.62  122512634 10210487366      10333    4.8e+03     314514   0.500755     500200   0.202912   0.820691
   1668.12  144205422 13200794578      13345   6.16e+03     296611   0.503147     500200   0.205189   0.909593
    2154.5  170141618 17065858382      17236   7.92e+03     282175   0.502508     500200   0.201248   0.784398
   2782.62  201152234 22059847766      22261   1.02e+04     263920   0.500231     500200   0.171635   0.803116
   3593.88  237204859 28513795141      28751   1.31e+04     247713   0.496951     500200     0.1878   0.804722
   4641.62  280586184 36852413816      37133   1.69e+04     237430   0.499577     500200   0.210932   0.776028
   5994.88  333522560 47625477440      47959   2.18e+04     228368   0.501095     500200   0.231934   0.792638
   7742.75  397832011 61544167989      61942    2.8e+04     219565   0.500418     500200    0.22786    0.82004
     10000  473691905 79526308095      80000   3.61e+04     210380   0.498621     500200   0.218827   0.809168
   12915.5  562424475 102761575525     103324   4.66e+04     203221   0.501014     500200   0.233124   0.795687
   16681.1  670654504 132778345496     133449   6.01e+04     194311    0.50133     500200   0.229693   0.813318
     20000  760389671 159239610329     160000   7.19e+04     188703   0.502869     500200   0.235321   0.755406
Loop time of 71931.1 on 1 procs

Solve time (%) = 71865.8 (99.9092)
Update time (%) = 0 (0)
Comm  time (%) = 0.661126 (0.00091911)
Outpt time (%) = 64.4003 (0.0895305)
App   time (%) = 0 (0)
Other time (%) = 0.245855 (0.000341792)
