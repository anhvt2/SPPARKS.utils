SPK INPUT SCRIPT:
# SPPARKS Potts tests on generic lattice
# a simple two-component, two- phase system.
# Parameters as in Homer, Tikare, Holm, Comp.Mat.Sci (2013)
# 2D lattice, similar to section 3.3.2

# seed 		56789
include in.seed.spk

# lambda sometimes called gamma
# a1 = a2 = a
# Nspins PFsteps lambda M_C KappaC a c1 c2 c3 c4
# set Nspins as a variable

# parameters settings (edit by AT)
variable	Nspins equal 200 # previously: 200
variable	boxSize equal 1000
variable 	PFsteps equal 10
variable	runTime equal 20000


# simulation
app_style	potts/pfm ${Nspins} ${PFsteps} 0.3 1 1 0.5 0.25 0.75 0.05 0.95 &
			reset_phasefield no &
			print_connectivity yes &
			initialize_values yes &
			enforce_concentration_limits no

dimension 	2
lattice 	sq/8n 1.0
region 		box block 0 ${boxSize} 0 ${boxSize} -0.5 0.5

create_box 	box
create_sites 	box

# assign random spins to sites
set 		site range 1 ${Nspins} #  edit by AT

# assign phase 0 or 1 to i2, based on spin

# set variable (edit by AT)
variable	thres1 equal "v_Nspins/2 + 1"
print		"Set variables successful! "

set 		i2 value 1
set 		i2 value 0 if i1 < ${thres1}  # 101 -> 1001

# assign initial concentration to d1, based on phase

set 		d1 value 1.0
set 		d1 value 0 if i2 = 0

sweep 		random
sector 		yes

# if yes, skip Monte Carlo solve or sweep
#app_update_only 	yes #no

# enforces concentration boundary conditions: C(xlo) = 0, C(xhi) = 1.0
#pottspfm_reset_phasefield yes #no

# show the neighborlist indices used for finite difference stencil
#pottspfm_print_connectivity yes #no

# initializes at equilibrium concentrations of phases dE/dC = 0
#pottspfm_initialize_values yes #no 

# constrain site concentrations to the physical range 
# if C(x) < 0.0, C(x) = 0.0
# if C(x) > 1.0, C(x) = 1.0
#pottspfm_enforce_concentration_limits yes #no

diag_style 	energy
diag_style 	array i2 mean d1 sum d1 min d1 max
temperature 	0.3

# all output generated at uniform intervals of log(t)

stats 		1.0 logfreq 9 10.0
dump 			1 text 1.0 dump.*.out id site i2 d1 energy
dump_modify 	1 logfreq 9 10.0

# graphics output
# if no JPEG support, remove these commands

dump			2 image 1.0 grain.*.jpg i1 site shape cube sdiam 1.0 crange 0 201 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	2 logfreq 9 10.0

dump			3 image 1.0 phase.*.jpg i2 site shape cube sdiam 1.0 crange -1 2 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	3 logfreq 9 10.0

dump			4 image 1.0 conc.*.jpg d1 site shape cube sdiam 1.0 crange 0.0 1.0 box no 0 view 0 0 zoom 2.02 center s 0.49 0.49 0.5
dump_modify 	4 logfreq 9 10.0

# cluster analysis based on spins

diag_style 		cluster delt 1.0 stats no logfreq 9 10.0 filename cluster.dat


# short run
run 			${runTime}



SPPARKS (24 June 2021)
Created box = (0 0 -0.5) to (1000 1000 0.5)
  1 by 1 by 1 processor grid
Creating sites ...
  1000000 sites
  1000000 sites have 8 neighbors
Setting site values ...
  1000000 settings made for site
Set variables successful! 
Setting site values ...
  1000000 settings made for i2
Setting site values ...
  499995 settings made for i2
Setting site values ...
  1000000 settings made for d1
Setting site values ...
  499995 settings made for d1
Connectivity map for app_style: potts/pfm
  +/-     x     y
    -     1     3
    +     6     4

Setting up run ...
Running with 32-bit site IDs
Memory usage per processor = 77.5 Mbytes
      Time    Naccept    Nreject    Nsweeps        CPU     Energy   mean(i2)    sum(d1)    min(d1)    max(d1)
         0          0          0          0          0 8.13628e+06   0.499995     499998   0.295455   0.704545
         1    2827621    5172379          8       7.22 3.38329e+06   0.499251     499998   0.195831   0.818021
     1.375    3229072    7770928         11       10.8 2.96414e+06   0.500205     499998   0.174314    0.81971
      1.75    3565177   10434823         14       14.3 2.70048e+06   0.500965     499998   0.154949   0.841405
      2.25    3955688   14044312         18       18.3 2.45924e+06   0.501608     499998   0.158059   0.880384
     2.875    4384383   18615617         23       22.9 2.24713e+06   0.501625     499998   0.149111   0.853412
     3.625    4845280   24154720         29       27.9 2.06113e+06   0.502248     499998   0.123717   0.884977
      4.75    5461781   32538219         38       34.5 1.86544e+06    0.50196     499998  0.0994513   0.885842
         6    6076256   41923744         48       41.5 1.7077e+06   0.501406     499998   0.108965   0.887104
      7.75    6853567   55146433         62       50.7 1.54721e+06   0.501941     499998  0.0697234   0.900899
        10    7745743   72254257         80       61.7 1.40123e+06   0.501722     499998   0.105592   0.920202
        13    8810584   95189416        104       75.7 1.26783e+06   0.502559     499998   0.070266   0.907775
     16.75   10002126  123997874        134       92.6 1.15003e+06   0.504049     499998  0.0802814   0.952351
Warning: Concentration has deviated outside [0,1] range
    21.625   11395144  161604856        173        114 1.04345e+06   0.504497     499998  0.0211042   0.915647
    27.875   12987658  210012342        223        140     951342   0.506178     499998  0.0616441   0.901943
        36   14845633  273154367        288        173     868138   0.504995     499998  0.0581018   0.902073
      46.5   17003034  354996966        372        216     794184   0.504756     499998  0.0743913   0.901811
        60   19517244  460482756        480        269     730289    0.50585     499998  0.0041792   0.916417
      77.5   22461472  597538528        620        337     671704   0.505679     499998   0.101852   0.891493
       100   25900139  774099861        800        423     621920   0.506381     499998  0.0128928   0.917181
    129.25   29999189 1004000811       1034        535     576152    0.50547     499998   0.103376   0.909774
   166.875   34842165 1300157835       1335        677     536115   0.505398     499998   0.134974   0.970465
     215.5   40652046 1683347954       1724        860     499642   0.504631     499998  0.0925908   0.889367
   278.375   47483856 2179516144       2227   1.09e+03     463738   0.503021     499998   0.113452   0.862873
     359.5   55530800 2820469200       2876    1.4e+03     432971    0.50061     499998   0.139552   0.852731
    464.25   64933708 3649066292       3714   1.78e+03     403621   0.499811     499998  0.0859624   0.854878
     599.5   76069500 4719930500       4796   2.28e+03     377199   0.497905     499998   0.141825    0.85744
   774.375   89356728 6105643272       6195   2.92e+03     352589   0.500602     499998   0.158267   0.834411
      1000  105373793 7894626207       8000   3.75e+03     334394   0.501087     499998   0.171235   0.841699
   1291.62  124649040 10208350960      10333   4.81e+03     315980   0.501584     499998   0.191025   0.796009
   1668.12  147623763 13197376237      13345   6.18e+03     297200   0.501567     499998   0.199284    0.80583
    2154.5  174598554 17061401446      17236   7.95e+03     280145   0.501283     499998   0.180835   0.816978
   2782.62  206237664 22054762336      22261   1.02e+04     265964   0.496823     499998   0.215997   0.804097
   3593.88  243977096 28507022904      28751   1.32e+04     252697   0.498654     499998    0.18982   0.791809
   4641.62  288416412 36844583588      37133   1.69e+04     238329   0.495847     499998   0.220014   0.801709
   5994.88  340893506 47618106494      47959   2.18e+04     222675   0.499089     499998   0.202011   0.776356
   7742.75  403539679 61538460321      61942   2.81e+04     211554   0.497235     499998   0.184362    0.78873
     10000  479074419 79520925581      80000   3.62e+04     202062   0.496477     499998   0.200075   0.775473
   12915.5  567679563 102756320437     103324   4.67e+04     194082   0.496143     499998   0.227083   0.797988
   16681.1  671565151 132777434849     133449   6.02e+04     185939   0.500114     499998   0.219027   0.766726
     20000  755679562 159244320438     160000   7.21e+04     180964   0.500295     499998   0.230271   0.776439
Loop time of 72096.5 on 1 procs

Solve time (%) = 72030.7 (99.9088)
Update time (%) = 0 (0)
Comm  time (%) = 0.836905 (0.00116081)
Outpt time (%) = 64.6511 (0.089673)
App   time (%) = 0 (0)
Other time (%) = 0.290438 (0.000402846)
